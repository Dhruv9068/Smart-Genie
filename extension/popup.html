<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SchemeGenie Auto Filler</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo-section">
                <div class="logo">
                    <img src="Logo.png" alt="SchemeGenie" class="logo-img">
                </div>
                <div class="brand">
                    <h1 class="brand-name">SchemeGenie</h1>
                    <p class="brand-subtitle">Auto Form Filler</p>
                </div>
            </div>
            <div class="status-indicator" id="statusIndicator">
                <div class="status-dot"></div>
                <span class="status-text">Checking...</span>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content" id="mainContent">
            <!-- Login Required State -->
            <div class="state-container" id="loginState" style="display: none;">
                <div class="state-icon">‚ö°</div>
                <h2 class="state-title">Initializing...</h2>
                <p class="state-description">
                    Connecting to Firebase and loading your forms...
                </p>
                <div class="bg-orange-50 border border-orange-200 rounded-lg p-3 mb-4 text-left">
                    <p class="text-xs text-orange-700">‚Ä¢ Direct Firebase connection</p>
                    <p class="text-xs text-orange-700">‚Ä¢ No login required</p>
                    <p class="text-xs text-orange-700">‚Ä¢ Auto-loads approved forms</p>
                </div>
            </div>

            <!-- Connected State -->
            <div class="state-container" id="connectedState" style="display: none;">
                <div class="user-info" id="userInfo">
                    <div class="user-avatar">
                        <span class="user-initial" id="userInitial">U</span>
                    </div>
                    <div class="user-details">
                        <h3 class="user-name" id="userName">Loading...</h3>
                        <p class="user-email" id="userEmail">Loading...</p>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="savedFormsCount">0</div>
                        <div class="stat-label">Ready Forms</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="applicationsCount">0</div>
                        <div class="stat-label">Total Apps</div>
                    </div>
                </div>

                <!-- Current Page Detection -->
                <div class="page-detection" id="pageDetection">
                    <div class="detection-icon">üîç</div>
                    <div class="detection-text">
                        <span class="detection-status" id="detectionStatus">Scanning page...</span>
                        <span class="detection-url" id="detectionUrl"></span>
                    </div>
                </div>

                <!-- Available Forms -->
                <div class="forms-section" id="formsSection">
                    <h3 class="section-title">
                        <span class="section-icon">üìã</span>
                        Ready to Fill
                    </h3>
                    <div class="forms-list" id="formsList">
                        <!-- Forms will be populated here -->
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="actions-section">
                    <button class="btn btn-outline" id="refreshBtn">
                        <span class="btn-icon">üîÑ</span>
                        Refresh
                    </button>
                    <button class="btn btn-secondary" id="dashboardBtn">
                        <span class="btn-icon">üìä</span>
                        Dashboard
                    </button>
                </div>
            </div>

            <!-- Form Filling State -->
            <div class="state-container" id="fillingState" style="display: none;">
                <div class="filling-animation">
                    <div class="filling-circle">
                        <div class="filling-progress" id="fillingProgress"></div>
                    </div>
                    <div class="filling-percentage" id="fillingPercentage">0%</div>
                </div>
                <h2 class="state-title">Filling Form</h2>
                <p class="state-description" id="fillingDescription">
                    Automatically filling form fields with your saved data...
                </p>
                <div class="filling-details" id="fillingDetails">
                    <div class="detail-item">
                        <span class="detail-label">Form:</span>
                        <span class="detail-value" id="currentFormName">-</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Progress:</span>
                        <span class="detail-value" id="fieldsProgress">0/0 fields</span>
                    </div>
                </div>
                <button class="btn btn-danger" id="stopFillingBtn">
                    <span class="btn-icon">‚èπÔ∏è</span>
                    Stop Filling
                </button>
            </div>

            <!-- Error State -->
            <div class="state-container" id="errorState" style="display: none;">
                <div class="state-icon">‚ö†Ô∏è</div>
                <h2 class="state-title">Connection Error</h2>
                <p class="state-description" id="errorMessage">
                    Unable to connect to SchemeGenie. Please check your internet connection.
                </p>
                <button class="btn btn-primary" id="retryBtn">
                    <span class="btn-icon">üîÑ</span>
                    Retry Connection
                </button>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-links">
                <a href="#" class="footer-link" id="helpLink">Demo Form</a>
                <a href="#" class="footer-link" id="refreshBtn">Refresh</a>
                <a href="#" class="footer-link" id="dashboardBtn">Dashboard</a>
            </div>
            <div class="footer-version">v1.0.0 - Firebase Direct</div>
        </div>
    </div>

    <script src="popup.js"></script>
</body>
</html>